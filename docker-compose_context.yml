services:
  app:
    build:
      context: .
      args:
        ROOT_HASHED_PWD: ${ROOT_HASHED_PWD}
        GROUP_SUDIERS_ID: ${GROUP_SUDIERS_ID}
        GROUP_SUDIERS_NAME: ${GROUP_SUDIERS_NAME}
        GROUP_USERS_ID: ${GROUP_USERS_ID}
        GROUP_USERS_NAME: ${GROUP_USERS_NAME}
        USER_SUDIER_ID: ${USER_SUDIER_ID}
        USER_SUDIER_NAME: ${USER_SUDIER_NAME}
        USER_SUDIER_HASHED_PWD: ${USER_SUDIER_HASHED_PWD}
        USER_ID: ${USER_ID}
        USER_NAME: ${USER_NAME}
        LOGGED_IN_USERNAME: ${LOGGED_IN_USERNAME}
        VOLUME_PATH: ${VOLUME_PATH}
    environment:
      ROOT_HASHED_PWD: ${ROOT_HASHED_PWD}
      GROUP_SUDIERS_ID: ${GROUP_SUDIERS_ID}
      GROUP_SUDIERS_NAME: ${GROUP_SUDIERS_NAME}
      GROUP_USERS_ID: ${GROUP_USERS_ID}
      GROUP_USERS_NAME: ${GROUP_USERS_NAME}
      USER_SUDIER_ID: ${USER_SUDIER_ID}
      USER_SUDIER_NAME: ${USER_SUDIER_NAME}
      USER_SUDIER_HASHED_PWD: ${USER_SUDIER_HASHED_PWD}
      USER_ID: ${USER_ID}
      USER_NAME: ${USER_NAME}
      LOGGED_IN_USERNAME: ${LOGGED_IN_USERNAME}
      VOLUME_PATH: ${VOLUME_PATH}
    volumes:
      - "./software/jaisocx-http/:/usr/lib/jaisocx-http/"
      - "./data/:${VOLUME_PATH}/"
      - "./log/:/var/log/"
    ports:
      - "80:80"
      - "443:443"
    networks:
      - sandbox_network
    extra_hosts:
      - "host.docker.internal:host-gateway"

networks:
  sandbox_network:
    driver: bridge
